!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).specificity=t()}(this,(function(){"use strict";function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,c,u,f=[],o=!0,a=!1;try{if(c=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=c.call(r)).done)&&(f.push(n.value),f.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{if(!o&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(a)throw i}}return f}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var r=function t(r){r=r.replace(/\s{2,}/g,(function(){return" "})).replace(/([,[=~>+])\s/g,(function(e,t){return t})).replace(/\s([,=\[\]~>+])/g,(function(e,t){return t}));for(var n={".":function(e){return{type:"class",name:e,specificity:10}},":":function(e){if(":"===e[0])return{type:"pseudo-element",name:e.slice(1),specificity:1};var r=e.indexOf("("),n=-1===r?e:e.slice(0,r),i="not"===n,c=i?0:10,u={type:"pseudo-class",name:n,specificity:c};if(-1!==r){var f=e.slice(n.length+1,-1).split(",");if(/^not|is|where$/.test(n))for(var o=u.innerNodes=[],a=0,l=f.length;a<l;a++){var s=t(f[a]);Array.prototype.push.apply(o,s);for(var p=0,y=s.length;p<y;p++){var d=s[p];i&&(c=Math.max(c,d.specificity)),delete d.specificity}u.specificity=c}else u.value=f[0]}return u},"[":function(t){var r=e(t.slice(0,-1).split("="),2);return{type:"attribute",name:r[0],value:r[1],specificity:10}},"#":function(e){return{type:"id",name:e,specificity:100}},",":function(){return{type:"combine"}},"*":function(){return{type:"universal"}},"+":function(){return{type:"adjacent"}},">":function(){return{type:"child"}},"~":function(){return{type:"sibling"}}," ":function(){return{type:"descendant"}}},i=function e(t,r){if(r){if(":"===t[0])return":".concat(e(t.slice(1),!1));var n=t.indexOf("(");if(-1===n)return e(t,!1);for(var i=1,c=0,u=n+1,f=t.length;u<f;u++)if("("===t[u]?i++:")"===t[u]&&i--,0===i){c=u;break}return t.slice(0,c+1)}for(var o="",a=/[,:*.>+~\s\[]/,l=0,s=t.length;l<s;l++)if(a.test(t[l])){o=t.slice(0,l);break}return o||t.slice(0)},c=[];r;){var u=r[0];if(/[,*>+~\s]/.test(u)){var f=n[u]();f&&c.push(f),r=r.slice(1)}else{var o=n[u],a=!/[.:#\[]/.test(u),l=i(r=r.slice(a?0:1),":"===u);if(o){var s=o(l);c.push(s)}else c.push({type:"element",name:l,specificity:1});r=r.slice(l.length)}}return c},n=function(e){for(var t=0,n=r(e),i=0,c=n.length;i<c;i++)t+=n[i].specificity||0;return t};return{compare:function(e,t){var r=n(e),i=n(t);return r>i?1:r===i?0:-1},getNodes:r,getSpecificity:n}}));
